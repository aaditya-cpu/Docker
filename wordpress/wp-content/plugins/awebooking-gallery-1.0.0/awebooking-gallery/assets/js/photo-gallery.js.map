{"version":3,"file":"photo-gallery.js","sources":["assets/babel/photo-gallery.js"],"sourcesContent":["const PhotoGallery = function($) {\n  const Defaults = {\n    index: 0,\n    shareEl: false,\n    history: false,\n    tapToClose: false,\n    clickToClose: false,\n    pinchToClose: false,\n    closeOnScroll: false,\n    closeOnVerticalDrag: false,\n    showHideOpacity: false,\n    hideAnimationDuration: 0,\n    showAnimationDuration: 0,\n    bgOpacity: 0.95,\n\n    showThumbs: true,\n  }\n\n  class Gallery {\n    constructor(element, items, options) {\n      options = $.extend({}, Defaults, options)\n\n      const pswpElement = document.querySelector('.pswp.pswp--awebooking')\n      const asideElement = pswpElement.querySelector('.pswp__aside')\n      const thumbsElement = pswpElement.querySelector('.pswp__thumbs')\n\n      $(element).on('click', (e) => {\n        e.preventDefault()\n\n        const gallery = new PhotoSwipe(this.getMarkupElement(), window.PhotoSwipeUI_Default, items, options)\n\n        if (asideElement) {\n          asideElement.innerHTML = ''; // TODO: ...\n        }\n\n        if (options.showThumbs) {\n          thumbsElement.innerHTML = '<ul class=\"thumbnail-list\"></ul>'\n\n          $.each(items, function (index, item) {\n            thumbsElement.querySelector('ul').innerHTML += `<li class=\"thumbnail-wrapper\"><img src=\"${item.src}\"></li>`;\n          })\n\n          $(thumbsElement).on('click', 'img', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            gallery.goTo($(this).parent().index())\n          })\n\n          gallery.listen('close', () => {\n            if (asideElement) {\n              asideElement.innerHTML = ''\n            }\n\n            thumbsElement.innerHTML = ''\n            $(thumbsElement).off('click', 'img');\n          })\n\n          gallery.listen('afterChange', () => {\n            $(thumbsElement).find('li.active').removeClass('active');\n            $(thumbsElement).find('li').eq(gallery.getCurrentIndex()).addClass('active');\n          })\n        }\n\n        gallery.init()\n      })\n    }\n\n    getMarkupElement() {\n      return document.querySelectorAll('.pswp.pswp--awebooking')[0]\n    }\n  }\n\n  // Fire on document ready.\n  $(function () {\n    const setting = window._awebookingGallery\n\n    if (setting.displayOnSearch) {\n      $('#search-rooms-results .roommaster-info__image').each((index, element) => {\n        let items = $(element).find('[data-gallery]').data('gallery') || []\n\n        if (!items || items.length === 0) {\n          return\n        }\n\n        $(element).data('awebooking-photo-gallery', new Gallery(element, items))\n      })\n    }\n\n    if (setting.displayOnSingle) {\n      $('.room-gallery-section .room-gallery__item').each((index, element) => {\n        let items = $(element).closest('.room-gallery').data('gallery') || []\n\n        const gallery = new Gallery(element, items, {\n          index: index,\n          showThumbs: false,\n          hideAnimationDuration: 333,\n          showAnimationDuration: 333,\n          getThumbBoundsFn: function(index) {\n            const thumbnail = element.getElementsByTagName('img')[0],\n              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n              rect = thumbnail.getBoundingClientRect();\n\n            return { x: rect.left, y: rect.top + pageYScroll, w: rect.width }\n          }\n        })\n      })\n    }\n  })\n\n  return Gallery\n}(jQuery);\n\n// Share the object into the awebooking instances.\nawebooking.instances.PhotoGallery = PhotoGallery\n"],"names":["PhotoGallery","$","Defaults","index","shareEl","history","tapToClose","clickToClose","pinchToClose","closeOnScroll","closeOnVerticalDrag","showHideOpacity","hideAnimationDuration","showAnimationDuration","bgOpacity","showThumbs","Gallery","element","items","options","extend","pswpElement","document","querySelector","asideElement","thumbsElement","on","e","preventDefault","gallery","PhotoSwipe","getMarkupElement","window","PhotoSwipeUI_Default","innerHTML","each","item","src","stopPropagation","goTo","parent","listen","off","find","removeClass","eq","getCurrentIndex","addClass","init","querySelectorAll","setting","_awebookingGallery","displayOnSearch","data","length","displayOnSingle","closest","getThumbBoundsFn","thumbnail","getElementsByTagName","pageYScroll","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","w","width","jQuery","awebooking","instances"],"mappings":"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"}